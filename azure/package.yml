queue:
  name: Hosted
  demands: maven

steps:
- task: gittools.gitversion.gitversion-task.GitVersion@3
  displayName: 'GitVersion'

- task: qetza.replacetokens.replacetokens-task.replacetokens@3
  displayName: 'Replace tokens in **/*.properties'
  inputs:
    targetFiles: '**/*.properties'

- task: Maven@3
  displayName: 'Create .jar'
  inputs:
    mavenPomFile: 'pom.xml'
    publishJUnitResults: false
    goals: 'clean package'

- task: CopyFiles@2
  displayName: 'Copy Files'
  inputs:
    SourceFolder: '$(system.defaultworkingdirectory)'
    Contents: 'target/pricefield/*'
    TargetFolder: '$(build.artifactstagingdirectory)'
    CleanTargetFolder: true

- task: PublishBuildArtifacts@1
  displayName: 'Publish Artifact: punkIRC'
  inputs:
    PathtoPublish: '$(build.artifactstagingdirectory)'
    ArtifactName: punkIRC